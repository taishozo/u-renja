(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{508:function(t,e,n){"use strict";n.r(e);n(53),n(22),n(23),n(5),n(40);var r=n(12),c=n(18),o=n(28),l=n(27),h=n(25),f=n(17),v=n(16),d=n(54),m=n(446);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var w=function(t,e,n,desc){var r,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,n,o):r(e,n))||o);return c>3&&o&&Object.defineProperty(e,n,o),o},j=function(t){Object(l.a)(h,t);var e,n=y(h);function h(){var t;return Object(c.a)(this,h),(t=n.apply(this,arguments)).height=-1,t.results=[],t.label="",t.title="",t.size=-1,t.map=[],t.items=[],t.id="",t.metadata=null,t}return Object(o.a)(h,[{key:"watchTmp",value:function(){this.init()}},{key:"init",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,data,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.height=.95*window.innerHeight,null!=(e=this.$store).state.json){t.next=9;break}return n=this.$route.query.u,t.next=7,this.$searchUtils.createIndex(n);case 7:r=t.sent,this.$searchUtils.initStore(e,r);case 9:"cr:Curation"===(data=this.$store.state.json)["@type"]?(c=this.handleCuration(data),this.items=c):(o=this.rec(data).children,this.items=o);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"handleCuration",value:function(t){for(var e=t.selections,n=[],i=0;i<e.length;i++){for(var r=e[i],c=r.members,o=[],l=0;l<c.length;l++){var h=c[l],label=h.label;label["@value"]&&(label=label["@value"]);var f={id:h["@id"],name:label,type:"sc:Manifest"};o.push(f)}var v=r.within.label?r.within.label:this.$t("top"),d={id:r["@id"],name:v,type:r["@type"],children:o};n.push(d)}return n}},{key:"rec",value:function(t){var e=t.collections||t.manifests,n={id:t["@id"]||Math.random().toString(32).substring(2),name:t.label,type:t["@type"]};if("sc:Manifest"===t["@type"]&&(n.url=this.localePath({name:"item",query:{u:this.$route.query.u,id:t["@id"]}})),t.thumbnail&&(n.thumbnail=t.thumbnail),null==e)return n;for(var r=[],i=0;i<e.length;i++){var c=e[i],o=this.rec(c);r.push(o)}return r.length>0&&(n.children=r),n}},{key:"head",value:function(){return{title:this.$t("collection")}}},{key:"select",value:function(t){for(var data=this.$store.state.data,i=0;i<data.length;i++){data[i]._id===t&&(this.metadata=data[i])}}},{key:"mounted",value:function(){this.init()}}]),h}(d.Vue);w([Object(d.Watch)("$route",{deep:!0})],j.prototype,"watchTmp",null);var k=j=w([Object(d.Component)({components:{Metadata:m.a}})],j),$=n(46),_=n(77),O=n.n(_),x=n(409),R=n(396),C=n(410),M=n(44),V=n(512),component=Object($.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-sheet",{attrs:{color:"grey lighten-3"}},[n("v-container",{staticClass:"py-4"},[n("h1",[t._v("\n        "+t._s(t.$t("tree"))+"\n      ")])])],1),t._v(" "),n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("div",{staticClass:"overflow-y-auto",style:"max-height: "+t.height+"px"},[n("v-treeview",{attrs:{items:t.items},scopedSlots:t._u([{key:"label",fn:function(e){var r=e.item;return[n("span",["sc:Manifest"==r.type?["xs"!=t.$vuetify.breakpoint.name&&"sm"!=t.$vuetify.breakpoint.name?[n("a",{on:{click:function(e){return t.select(r.id)}}},[t._v(t._s(r.name))])]:[n("nuxt-link",{attrs:{to:t.localePath({name:"item",query:{u:t.$route.query.u,id:r.id}})}},[t._v(t._s(r.name))])]]:[t._v("\n                  "+t._s(r.name)+"\n                ")]],2)]}}])})],1)]),t._v(" "),n("v-col",{attrs:{cols:"12",md:"8"}},[n("div",{staticClass:"overflow-y-auto",style:"max-height: "+t.height+"px"},[t.metadata?n("Metadata",{attrs:{metadata:t.metadata}}):t._e()],1)])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;O()(component,{VCol:x.a,VContainer:R.a,VRow:C.a,VSheet:M.a,VTreeview:V.a})}}]);